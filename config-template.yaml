# Global provisioning configuration template.
#
# Copy this file to config.yaml or <hostname>.yaml and adjust values as needed.
# Values in this file provide defaults. Create an additional YAML file named
# after the current host (e.g. fury.yaml) in the same directory to override
# specific settings per machine.
#
# Boolean flags accept true/false. Omit or set to null to inherit defaults.

profiles:
  # Optional profile names to load before base/host config. Ignored when --profiles is supplied.
  # - server
  # - dev

userStepUsers:
  # Optional allowlist of users permitted to run RUN_AS_USER steps.
  # - alice
  # - bob

steps:
  AdminGroupNopass:
    # Automatically add the invoking user to the passwordless admin group.
    adminGroup: admin
    addCurrentUser: true
    # Additional accounts to add to the admin group.
    users:
      - admin

  Essentials:
    # Install baseline CLI packages required on all systems.
    packages:
      # Use "<package> alias <target>" to install a package, remove any package owning the target command, and point update-alternatives at the package's primary binary.
      # Use "<package> alias <source> -> <target>" to override the source command.
      - curl
      - wget
      - zip
      - unzip
      - rsync
      - ca-certificates
      - gnupg
      - apt-transport-https
      - neovim alias vim

  GitPrompt:
    # Configure a Git-aware shell prompt sourced from ~/.bashrc.
    enabled: true
    promptFile: ~/.git-prompt.sh
    bashrcPath: ~/.bashrc

  Ntp:
    # Ensure systemd-timesyncd is installed and enabled.
    enabled: true

  NisSetup:
    # Provide a domain to enable NIS provisioning; leave null to skip.
    domain:
    # Either a bare host/IP or a full "ypserver <host>" line.
    server:

  NisServer:
    # Configure this host as an NIS master; leave null to skip.
    domain:
    maps:
      - passwd
      - group

  Nsswitch:
    # Ensure NIS entries are present in nsswitch.conf.
    enabled: true

  PamMkhomedir:
    # Install and enforce pam_mkhomedir for creating home directories.
    enabled: true

  DockerInstall:
    # Install Docker Engine and related tooling from the official repository.
    enabled: true

  DockerDataRoot:
    # Override the Docker data-root. Set to null to keep the default location.
    target: /data/docker

  DockerGroup:
    # Ensure the current user is a member of the docker group.
    ensureUser: true
    # Additional accounts to place in the docker group.
    users: []
    enabled: true

  SdkmanMavenInstall:
    # Manage Maven installation via SDKMAN.
    version: 3.9.11
    enabled: true

  SdkmanJavaInstall:
    # Manage Java runtimes via SDKMAN.
    defaultJava: 17.0.16-tem
    javaVersions:
      - 17.0.16-tem
      - 21.0.8-tem
      - 25-tem
    enabled: true

  Insomnia:
    # Install the Insomnia API client.
    enabled: true

  GoogleChromeInstall:
    # Install Google Chrome Stable via the Google apt repository.
    enabled: false

  JetbrainsToolbox:
    # Install JetBrains Toolbox for IDE management.
    enabled: true

  DebianMirror:
    # Configure and serve a local Debian apt mirror via Apache.
    enabled: false
    siteFqdn: mirror.dublinux.lan
    mirrorRoot: /var/ftp/pub/mirrors
    distributions:
      - bookworm
      - trixie
    components:
      - main
      - contrib
      - non-free
      - non-free-firmware
    includeUpdates: true
    includeBackports: true
    securitySuites:
      - bookworm-security
      - trixie-security
    threads: 20
    runInitialSync: true
    cronEnabled: true

  ExtendSuspend:
    # Ensure the system idle suspend delay is extended.
    enabled: true
    idleAction: suspend
    # Use OFF or INF to disable idle suspend while keeping the step enabled.
    timeout: PT1H

  NvidiaDriverInstall:
    # Install NVIDIA drivers for Debian 13 using the Groovy runbook step.
    enabled: false

  EspReplicate:
    # Replicate the EFI System Partition and install GRUB on matching disks.
    # Use true to apply, false to skip, or info to display planned actions only.
    enabled: info
    bootloaderId: debian
    autoApprove: false

  SambaShares:
    # Configure Samba shares (standalone, share-level access).
    enabled: false
    workgroup: WORKGROUP
    serverString: Samba Server
    disablePrinters: true
    sambaUsers:
      - name: shareuser
    shares:
      - name: Public
        path: /srv/samba/public
        comment: Public share
        browseable: true
        readOnly: false
        validUsers:
          - shareuser
        forceUser: shareuser
        forceGroup: sharegroup
        createMask: "0664"
        directoryMask: "0775"
